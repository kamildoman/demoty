{"ast":null,"code":"import _asyncToGenerator from\"C:\\\\Users\\\\login\\\\Documents\\\\python\\\\demotywatory\\\\demoty\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _slicedToArray from\"C:\\\\Users\\\\login\\\\Documents\\\\python\\\\demotywatory\\\\demoty\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\login\\\\Documents\\\\python\\\\demotywatory\\\\demoty\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useState,useEffect}from\"react\";import axios from\"axios\";import{Link}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Demot(props){var _useState=useState(props.upvote-props.downvote),_useState2=_slicedToArray(_useState,2),totalVote=_useState2[0],setTotalVote=_useState2[1];var _useState3=useState(props.upvote),_useState4=_slicedToArray(_useState3,2),upVote=_useState4[0],setUpVote=_useState4[1];var _useState5=useState(props.downvote),_useState6=_slicedToArray(_useState5,2),downVote=_useState6[0],setDownVote=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),ip=_useState8[0],setIP=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isAdded=_useState10[0],setIsAdded=_useState10[1];var getIPData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get('https://geolocation-db.com/json/');case 2:res=_context.sent;console.log(res.data.IPv4);setIP(res.data.IPv4);case 5:case\"end\":return _context.stop();}}},_callee);}));return function getIPData(){return _ref.apply(this,arguments);};}();useEffect(function(){getIPData();},[]);var ip_to_add=props.ips+\", \"+ip;function voteUp(){if(isAdded===false){if(props.ips==null||!props.ips.includes(ip)){setIsAdded(true);setUpVote(upVote+=1);axios.put('/api/'+props.id+'/',{title:props.title,upvote:upVote,ips:ip_to_add});setTotalVote(totalVote+=1);}else{alert(\"You already voted!\");}}else{alert(\"You can vote only once!\");}};function voteDown(){if(isAdded===false){if(props.ips==null||!props.ips.includes(ip)){setIsAdded(true);setDownVote(downVote+=1);axios.put('/api/'+props.id+'/',{title:props.title,downvote:downVote,ips:ip_to_add});setTotalVote(totalVote-=1);}else{alert(\"You already voted!\");}}else{alert(\"You can vote only once!\");}}function ButtonPlus(){return/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){voteUp();},className:\"plus buttonMark\",children:\"+\"});}function ButtonMinus(){return/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){voteDown();},className:\"minus buttonMark\",children:\"-\"});}if(props.whole===true){return/*#__PURE__*/_jsxs(\"div\",{className:\"whole-demot\",children:[/*#__PURE__*/_jsxs(Link,{to:\"/demot/\".concat(props.id),className:\"demot\",children:[/*#__PURE__*/_jsx(\"img\",{alt:\"demot\",className:\"demot-img\",src:props.image}),/*#__PURE__*/_jsx(\"h2\",{children:props.title}),/*#__PURE__*/_jsx(\"h3\",{children:props.subtitle})]}),/*#__PURE__*/_jsx(ButtonPlus,{}),/*#__PURE__*/_jsx(ButtonMinus,{}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Total: \",totalVote]})]});}else if(props.whole===false){return/*#__PURE__*/_jsx(\"div\",{className:\"demotMini\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"demot-small\",children:[/*#__PURE__*/_jsx(\"img\",{alt:\"demot\",className:\"demot-small-img\",src:props.image}),/*#__PURE__*/_jsx(\"h4\",{children:props.title}),/*#__PURE__*/_jsx(\"h6\",{children:props.subtitle})]})});}}export default Demot;","map":{"version":3,"sources":["C:/Users/login/Documents/python/demotywatory/demoty/src/Demot.jsx"],"names":["React","useState","useEffect","axios","Link","Demot","props","upvote","downvote","totalVote","setTotalVote","upVote","setUpVote","downVote","setDownVote","ip","setIP","isAdded","setIsAdded","getIPData","get","res","console","log","data","IPv4","ip_to_add","ips","voteUp","includes","put","id","title","alert","voteDown","ButtonPlus","ButtonMinus","whole","image","subtitle"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from \"react\";\r\nimport axios from \"axios\";\r\nimport {Link} from 'react-router-dom';\r\n\r\nfunction Demot(props){\r\n\r\n    var [totalVote, setTotalVote] = useState(props.upvote - props.downvote)\r\n    var [upVote, setUpVote] = useState(props.upvote)\r\n    var [downVote, setDownVote] = useState(props.downvote)\r\n    const [ip, setIP] = useState('');\r\n    const [isAdded, setIsAdded] = useState(false)\r\n\r\n    const getIPData = async () => {\r\n        const res = await axios.get('https://geolocation-db.com/json/')\r\n        console.log(res.data.IPv4);\r\n        setIP(res.data.IPv4)\r\n      }\r\n\r\n      useEffect( () => {\r\n        getIPData()\r\n    \r\n      }, [])\r\n      var ip_to_add = props.ips + \", \" + ip\r\n\r\n    function voteUp(){\r\n        if (isAdded === false){\r\n            if (props.ips == null || !props.ips.includes(ip)){\r\n                setIsAdded(true)\r\n                setUpVote(upVote += 1)   \r\n                axios.put('/api/' + props.id + '/', {title: props.title, upvote: upVote, ips: ip_to_add})\r\n                setTotalVote(totalVote +=1)\r\n            }\r\n            else{\r\n                alert(\"You already voted!\")\r\n            }\r\n        }\r\n        else {\r\n            alert(\"You can vote only once!\")\r\n        }\r\n        };\r\n\r\n    function voteDown(){\r\n        if (isAdded === false){\r\n            if (props.ips == null || !props.ips.includes(ip)){\r\n                setIsAdded(true)\r\n                setDownVote(downVote += 1)\r\n                axios.put('/api/' + props.id + '/', {title: props.title, downvote: downVote, ips: ip_to_add})\r\n                setTotalVote(totalVote -=1)\r\n            }\r\n            else{\r\n                alert(\"You already voted!\")\r\n            }\r\n        }\r\n        else {\r\n            alert(\"You can vote only once!\")\r\n        }\r\n    }\r\n\r\n    \r\n\r\n    function ButtonPlus(){\r\n\r\n        return (<button onClick={() =>{\r\n            voteUp()\r\n        }} className=\"plus buttonMark\">+</button>)\r\n    }\r\n\r\n    function ButtonMinus(){\r\n        return (<button onClick={() =>{\r\n            voteDown()\r\n}}\r\n            className=\"minus buttonMark\">-</button>)\r\n    }\r\n\r\n    if (props.whole === true){\r\n        return <div className=\"whole-demot\">\r\n                <Link to={`/demot/${props.id}`} className=\"demot\">\r\n                    <img alt=\"demot\" className=\"demot-img\" src={props.image} /><h2>{props.title}</h2><h3>{props.subtitle}</h3>\r\n                </Link><ButtonPlus /><ButtonMinus /><p>Total: {totalVote}</p>\r\n                </div>\r\n            }\r\n    else if (props.whole === false){\r\n        return <div className=\"demotMini\">\r\n                <div className=\"demot-small\">\r\n                    <img alt=\"demot\" className=\"demot-small-img\" src={props.image} /><h4>{props.title}</h4><h6>{props.subtitle}</h6>\r\n                </div>\r\n                </div>\r\n    }\r\n}\r\n\r\nexport default Demot"]},"metadata":{},"sourceType":"module"}