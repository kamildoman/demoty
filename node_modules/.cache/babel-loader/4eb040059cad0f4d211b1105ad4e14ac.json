{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\login\\\\Documents\\\\python\\\\demotywatory\\\\demoty\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import React,{useState}from\"react\";import Modal from'react-modal';import axios from\"axios\";import Demot from\"./Demot\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function AddDemotModal(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),subtitle=_useState4[0],setSubtitle=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),image=_useState6[0],setImage=_useState6[1];// this one is shown while creating demots\nvar _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),imageDisplay=_useState8[0],setImageDisplay=_useState8[1];function addModal(){var formData=new FormData();var token=localStorage.getItem('LoginToken');formData.append(\"token\",token);formData.append(\"title\",title);formData.append(\"subtitle\",subtitle);formData.append(\"image\",image);setTitle('');setSubtitle('');setImage(null);setImageDisplay(null);axios.post(\"/api/demots/\",formData,{headers:{'Content-Type':'multipart/form-data'}}).catch(function(error){alert(\"Title and photo are required! Error message: \"+error);});props.openAddDemotModal();setTimeout(props.refresh,1000);props.setCurrentPage(1);}function handleTitleChange(event){setTitle(event.target.value);}function handleSubtitleChange(event){setSubtitle(event.target.value);}function handleImageChange(event){var file=event.target.files[0];setImage(file);setImageDisplay(URL.createObjectURL(file));}return/*#__PURE__*/_jsxs(Modal,{ariaHideApp:false,centered:true,className:\"addDemotModal\",isOpen:props.isOpen,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mainModal\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"ADD DEMOT\"}),/*#__PURE__*/_jsx(\"input\",{onChange:handleTitleChange,value:title,maxLength:\"30\",id:\"title\",placeholder:\"Write your title\"}),/*#__PURE__*/_jsx(\"input\",{onChange:handleSubtitleChange,value:subtitle,maxLength:\"150\",id:\"subtitle\",placeholder:\"Write your subtitle\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"img\",name:\"img\",accept:\"image/*\",onChange:handleImageChange}),/*#__PURE__*/_jsx(\"label\",{className:\"imgLabel\",htmlFor:\"img\",children:\"Upload image\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"addDemotButton\",onClick:function onClick(){addModal();},children:\"ADD\"}),/*#__PURE__*/_jsx(\"button\",{className:\"dontAddDemotButton\",onClick:function onClick(){props.openAddDemotModal();},children:\"CLOSE\"}),/*#__PURE__*/_jsx(\"div\",{className:\"smallDemotAlign\",children:/*#__PURE__*/_jsx(Demot,{whole:false,title:title,subtitle:subtitle,image:imageDisplay})})]});}export default AddDemotModal;","map":{"version":3,"sources":["C:/Users/login/Documents/python/demotywatory/demoty/src/AddDemotModal.jsx"],"names":["React","useState","Modal","axios","Demot","AddDemotModal","props","title","setTitle","subtitle","setSubtitle","image","setImage","imageDisplay","setImageDisplay","addModal","formData","FormData","token","localStorage","getItem","append","post","headers","catch","error","alert","openAddDemotModal","setTimeout","refresh","setCurrentPage","handleTitleChange","event","target","value","handleSubtitleChange","handleImageChange","file","files","URL","createObjectURL","isOpen"],"mappings":"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","sourcesContent":["import React, {useState} from \"react\";\r\nimport Modal from 'react-modal';\r\nimport axios from \"axios\";\r\nimport Demot from \"./Demot\"\r\n\r\nfunction AddDemotModal(props) {\r\n    const [title, setTitle] = useState('')\r\n    const [subtitle, setSubtitle] = useState('')\r\n    const [image, setImage] = useState(null)\r\n    // this one is shown while creating demots\r\n    const [imageDisplay, setImageDisplay] = useState(null)\r\n\r\n    function addModal(){\r\n        var formData = new FormData();\r\n        let token = localStorage.getItem('LoginToken')\r\n\r\n        formData.append(\"token\", token)\r\n        formData.append(\"title\", title);\r\n        formData.append(\"subtitle\", subtitle)\r\n        formData.append(\"image\", image);\r\n        \r\n        setTitle('')\r\n        setSubtitle('')\r\n        setImage(null)\r\n        setImageDisplay(null)\r\n        axios.post(\"/api/demots/\", formData, {\r\n            headers: {\r\n              'Content-Type': 'multipart/form-data'\r\n            }}).catch(error => {\r\n                alert(\"Title and photo are required! Error message: \" + error)\r\n            })\r\n        props.openAddDemotModal()\r\n        setTimeout(props.refresh, 1000)\r\n        props.setCurrentPage(1)\r\n    }\r\n\r\n    function handleTitleChange(event){\r\n        setTitle(event.target.value)\r\n    }\r\n    function handleSubtitleChange(event){\r\n        setSubtitle(event.target.value)\r\n    }\r\n    function handleImageChange(event){\r\n        var file = event.target.files[0]\r\n        setImage(file)\r\n        setImageDisplay(URL.createObjectURL(file))\r\n    }\r\n\r\n\r\n    return (\r\n        <Modal ariaHideApp={false} centered className=\"addDemotModal\" isOpen={props.isOpen}>\r\n        <div className=\"mainModal\">\r\n            <h2>ADD DEMOT</h2>\r\n            <input onChange={handleTitleChange} value={title} maxLength=\"30\" id=\"title\" placeholder=\"Write your title\"></input>\r\n            <input onChange={handleSubtitleChange} value={subtitle} maxLength=\"150\" id=\"subtitle\" placeholder=\"Write your subtitle\"></input>\r\n            <input type=\"file\" id=\"img\" name=\"img\" accept=\"image/*\" onChange={handleImageChange}  />\r\n            <label className=\"imgLabel\" htmlFor=\"img\">Upload image</label>\r\n        </div>\r\n            <button className=\"addDemotButton\" onClick={() => {addModal()}}>ADD</button>\r\n        \r\n            <button className=\"dontAddDemotButton\" onClick={() => {props.openAddDemotModal()}}>CLOSE</button>\r\n        <div className=\"smallDemotAlign\">\r\n            <Demot whole={false} title={title} subtitle={subtitle} image={imageDisplay}/>\r\n        </div>   \r\n    </Modal>\r\n    )\r\n}\r\n\r\nexport default AddDemotModal\r\n"]},"metadata":{},"sourceType":"module"}