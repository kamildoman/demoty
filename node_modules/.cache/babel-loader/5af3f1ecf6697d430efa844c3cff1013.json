{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\login\\\\Documents\\\\python\\\\demotywatory\\\\demoty\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import React,{useState,useEffect}from\"react\";import axios from\"axios\";import Demot from\"./Demot\";import Navbar from'./Navbar';import Pagination from'./Pagination';import'./App.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";axios.defaults.xsrfCookieName='csrftoken';axios.defaults.xsrfHeaderName='X-CSRFToken';function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),demots=_useState2[0],setDemots=_useState2[1];var _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),currentPage=_useState4[0],setCurrentPage=_useState4[1];var _useState5=useState(5),_useState6=_slicedToArray(_useState5,1),postsPerPage=_useState6[0];var refreshList=function refreshList(){axios.get('/api/').then(function(response){console.log(\"AAA\"+response);setDemots(response.data.reverse());});console.log(\"refreshed\");};useEffect(function(){refreshList();},[]);var indexOfLastPost=currentPage*postsPerPage;var indexOfFirstPost=indexOfLastPost-postsPerPage;var currentPosts=demots.slice(indexOfFirstPost,indexOfLastPost);function paginate(pageNumber){setCurrentPage(pageNumber);}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Navbar,{setCurrentPage:setCurrentPage,refresh:refreshList}),/*#__PURE__*/_jsxs(\"div\",{className:\"main\",children:[currentPosts.map(function(demot){return/*#__PURE__*/_jsx(Demot,{id:demot.id,whole:true,title:demot.title,subtitle:demot.subtitle,image:demot.image,upvote:demot.upvote,downvote:demot.downvote,ips:demot.ips},demot.id);}),/*#__PURE__*/_jsx(Pagination,{postsPerPage:postsPerPage,totalPosts:demots.length,paginate:paginate})]})]});}export default App;","map":{"version":3,"sources":["C:/Users/login/Documents/python/demotywatory/demoty/src/App.js"],"names":["React","useState","useEffect","axios","Demot","Navbar","Pagination","defaults","xsrfCookieName","xsrfHeaderName","App","demots","setDemots","currentPage","setCurrentPage","postsPerPage","refreshList","get","then","response","console","log","data","reverse","indexOfLastPost","indexOfFirstPost","currentPosts","slice","paginate","pageNumber","map","demot","id","title","subtitle","image","upvote","downvote","ips","length"],"mappings":"qJAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,KAAP,KAAkB,SAAlB,CACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,CACA,MAAOC,CAAAA,UAAP,KAAuB,cAAvB,CACA,MAAO,WAAP,C,wFAGAH,KAAK,CAACI,QAAN,CAAeC,cAAf,CAAgC,WAAhC,CACAL,KAAK,CAACI,QAAN,CAAeE,cAAf,CAAgC,aAAhC,CAEA,QAASC,CAAAA,GAAT,EAAe,CACb,cAA4BT,QAAQ,CAAC,EAAD,CAApC,wCAAOU,MAAP,eAAeC,SAAf,eACA,eAAsCX,QAAQ,CAAC,CAAD,CAA9C,yCAAOY,WAAP,eAAoBC,cAApB,eACA,eAAuBb,QAAQ,CAAC,CAAD,CAA/B,yCAAOc,YAAP,eAEA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CACtBb,KAAK,CAACc,GAAN,CAAU,OAAV,EACCC,IADD,CACM,SAAUC,QAAV,CAAoB,CACxBC,OAAO,CAACC,GAAR,CAAY,MAAQF,QAApB,EACAP,SAAS,CAACO,QAAQ,CAACG,IAAT,CAAcC,OAAd,EAAD,CAAT,CACD,CAJD,EAKAH,OAAO,CAACC,GAAR,CAAY,WAAZ,EACD,CAPH,CASEnB,SAAS,CAAC,UAAM,CACdc,WAAW,GACZ,CAFQ,CAEN,EAFM,CAAT,CAIA,GAAMQ,CAAAA,eAAe,CAAGX,WAAW,CAAGE,YAAtC,CACA,GAAMU,CAAAA,gBAAgB,CAAGD,eAAe,CAAGT,YAA3C,CACA,GAAMW,CAAAA,YAAY,CAAGf,MAAM,CAACgB,KAAP,CAAaF,gBAAb,CAA+BD,eAA/B,CAArB,CAEA,QAASI,CAAAA,QAAT,CAAkBC,UAAlB,CAA6B,CAC3Bf,cAAc,CAACe,UAAD,CAAd,CACD,CAED,mBAAQ,oCACE,KAAC,MAAD,EAAQ,cAAc,CAAEf,cAAxB,CAAwC,OAAO,CAAEE,WAAjD,EADF,cAEE,aAAK,SAAS,CAAC,MAAf,WACCU,YAAY,CAACI,GAAb,CAAiB,SAAAC,KAAK,qBACvB,KAAC,KAAD,EAEA,EAAE,CAAIA,KAAK,CAACC,EAFZ,CAGA,KAAK,CAAI,IAHT,CAIA,KAAK,CAAED,KAAK,CAACE,KAJb,CAKA,QAAQ,CAAEF,KAAK,CAACG,QALhB,CAMA,KAAK,CAAEH,KAAK,CAACI,KANb,CAOA,MAAM,CAAEJ,KAAK,CAACK,MAPd,CAQA,QAAQ,CAAEL,KAAK,CAACM,QARhB,CASA,GAAG,CAAEN,KAAK,CAACO,GATX,EACMP,KAAK,CAACC,EADZ,CADuB,EAAtB,CADD,cAcF,KAAC,UAAD,EACA,YAAY,CAAEjB,YADd,CAEA,UAAU,CAAEJ,MAAM,CAAC4B,MAFnB,CAGA,QAAQ,CAAEX,QAHV,EAdE,GAFF,GAAR,CAyBD,CAEH,cAAelB,CAAAA,GAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport Demot from \"./Demot\"\nimport Navbar from './Navbar'\nimport Pagination from './Pagination'\nimport './App.css';\n\n\naxios.defaults.xsrfCookieName = 'csrftoken'\naxios.defaults.xsrfHeaderName = 'X-CSRFToken'\n\nfunction App() {\n  const [demots, setDemots] = useState([])\n  const [currentPage, setCurrentPage] = useState(1)\n  const [postsPerPage] = useState(5)\n\n  const refreshList = () => {\n      axios.get('/api/')\n      .then(function (response) {\n        console.log(\"AAA\" + response)\n        setDemots(response.data.reverse()) \n      })\n      console.log(\"refreshed\")\n    };\n\n    useEffect(() => {\n      refreshList()\n    }, [])\n    \n    const indexOfLastPost = currentPage * postsPerPage\n    const indexOfFirstPost = indexOfLastPost - postsPerPage\n    const currentPosts = demots.slice(indexOfFirstPost, indexOfLastPost)\n\n    function paginate(pageNumber){\n      setCurrentPage(pageNumber)\n    }\n\n    return (<div>\n              <Navbar setCurrentPage={setCurrentPage} refresh={refreshList}/>\n              <div className=\"main\">\n              {currentPosts.map(demot =>(\n              <Demot\n              key= {demot.id} \n              id = {demot.id}\n              whole = {true}\n              title={demot.title}\n              subtitle={demot.subtitle}  \n              image={demot.image}\n              upvote={demot.upvote}\n              downvote={demot.downvote}\n              ips={demot.ips}\n              />\n            ))}\n            <Pagination \n            postsPerPage={postsPerPage} \n            totalPosts={demots.length} \n            paginate={paginate}  \n            />\n            </div>\n           \n            </div>)\n    \n  }\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}