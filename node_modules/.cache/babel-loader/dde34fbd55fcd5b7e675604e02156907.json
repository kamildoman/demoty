{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\login\\\\Documents\\\\python\\\\demotywatory\\\\demoty\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import React,{useState,useEffect}from\"react\";import Modal from'react-modal';import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function RegisterModal(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),users=_useState2[0],setUsers=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),username=_useState4[0],setUsername=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),email=_useState6[0],setEmail=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),password=_useState8[0],setPassword=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),confirmPassword=_useState10[0],setConfirmPassword=_useState10[1];function getUsernames(){axios.get('/api/all-users/').then(function(res){setUsers(res.data);});}useEffect(function(){getUsernames();},[]);function register(){if(password!==confirmPassword){alert(\"Passwords don't match\");}else if(password.length<5){alert(\"Password should be at least 5 characters long\");}else if(users.length>0&&users.find(function(user){return user.username===username;})){alert(\"This username already exists!\");}else{var formData=new FormData();formData.append('username',username);formData.append('email',email);formData.append('password',password);axios.post(\"/register/\",formData).then(function(response){localStorage.setItem('LoginToken',response.data.token);}).catch(function(e){alert(\"Error! Please enter a valid username and email\");});props.refresh();setUsername(\"\");setEmail(\"\");setPassword(\"\");setConfirmPassword(\"\");}}function handleUsernameChange(event){setUsername(event.target.value);}function handleEmailChange(event){setEmail(event.target.value);}function handlePasswordChange(event){setPassword(event.target.value);}function handleConfirmPasswordChange(event){setConfirmPassword(event.target.value);}return/*#__PURE__*/_jsxs(Modal,{ariaHideApp:false,centered:true,className:\"addDemotModal\",isOpen:props.isOpen,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mainModal\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"REGISTER\"}),/*#__PURE__*/_jsx(\"input\",{onChange:handleUsernameChange,value:username,maxLength:\"30\",id:\"username\",placeholder:\"Write your username\"}),/*#__PURE__*/_jsx(\"input\",{onChange:handleEmailChange,value:email,maxLength:\"30\",id:\"email\",placeholder:\"Write your email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",onChange:handlePasswordChange,value:password,maxLength:\"30\",id:\"password\",placeholder:\"Write your password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",onChange:handleConfirmPasswordChange,value:confirmPassword,maxLength:\"30\",id:\"confirmPassword\",placeholder:\"Confirm your password\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"addDemotButton\",onClick:function onClick(){register();},children:\"REGISTER\"}),/*#__PURE__*/_jsx(\"button\",{className:\"dontAddDemotButton\",onClick:function onClick(){props.openRegisterModal();},children:\"CLOSE\"})]});}export default RegisterModal;","map":{"version":3,"sources":["C:/Users/login/Documents/python/demotywatory/demoty/src/RegisterModal.jsx"],"names":["React","useState","useEffect","Modal","axios","RegisterModal","props","users","setUsers","username","setUsername","email","setEmail","password","setPassword","confirmPassword","setConfirmPassword","getUsernames","get","then","res","data","register","alert","length","find","user","formData","FormData","append","post","response","localStorage","setItem","token","catch","e","refresh","handleUsernameChange","event","target","value","handleEmailChange","handlePasswordChange","handleConfirmPasswordChange","isOpen","openRegisterModal"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from \"react\";\r\nimport Modal from 'react-modal';\r\nimport axios from \"axios\";\r\n\r\nfunction RegisterModal(props) {\r\n\r\n    const [users, setUsers] = useState([])\r\n    const [username, setUsername] = useState('')\r\n    const [email, setEmail] = useState('')\r\n    const [password, setPassword] = useState('')\r\n    const [confirmPassword, setConfirmPassword] = useState('')\r\n\r\n    function getUsernames(){\r\n        axios.get('/api/all-users/').then(res =>{\r\n            setUsers(res.data)\r\n        })\r\n    }\r\n\r\n    useEffect(() => {\r\n        getUsernames()\r\n      }, [])\r\n    \r\n\r\n    function register(){\r\n        if (password !== confirmPassword){\r\n            alert(\"Passwords don't match\")\r\n        }\r\n        else if (password.length < 5){\r\n            alert(\"Password should be at least 5 characters long\")\r\n        }\r\n        else if (users.length > 0 && users.find(user => user.username === username)) {\r\n            alert(\"This username already exists!\")\r\n           }\r\n        else {\r\n            var formData = new FormData();\r\n            formData.append('username', username)\r\n            formData.append('email', email)\r\n            formData.append('password', password)     \r\n            axios.post(\"/register/\", formData)\r\n            .then(function (response) {\r\n                localStorage.setItem('LoginToken', response.data.token);\r\n            }).catch(e => {\r\n                alert(\"Error! Please enter a valid username and email\")\r\n            })\r\n            props.refresh()\r\n            setUsername(\"\")\r\n            setEmail(\"\")\r\n            setPassword(\"\")\r\n            setConfirmPassword(\"\")\r\n        }\r\n    }\r\n\r\n\r\n    function handleUsernameChange(event){\r\n        setUsername(event.target.value)\r\n    }\r\n\r\n    function handleEmailChange(event){\r\n        setEmail(event.target.value)\r\n    }\r\n\r\n    function handlePasswordChange(event){\r\n        setPassword(event.target.value)\r\n    }\r\n\r\n    function handleConfirmPasswordChange(event){\r\n        setConfirmPassword(event.target.value)\r\n    }\r\n\r\n\r\n    return (\r\n        <Modal ariaHideApp={false} centered className=\"addDemotModal\" isOpen={props.isOpen}>\r\n        <div className=\"mainModal\">\r\n            <h2>REGISTER</h2>\r\n            <input onChange={handleUsernameChange} value={username} \r\n            maxLength=\"30\" id=\"username\" placeholder=\"Write your username\" />\r\n            <input onChange={handleEmailChange} value={email} \r\n            maxLength=\"30\" id=\"email\" placeholder=\"Write your email\" />\r\n            <input type=\"password\" onChange={handlePasswordChange} value={password} \r\n            maxLength=\"30\" id=\"password\" placeholder=\"Write your password\" />\r\n            <input type=\"password\" onChange={handleConfirmPasswordChange} value={confirmPassword} \r\n            maxLength=\"30\" id=\"confirmPassword\" placeholder=\"Confirm your password\" />\r\n            \r\n            \r\n        </div>\r\n            <button className=\"addDemotButton\" onClick={() => {register()}}>REGISTER</button>\r\n        \r\n            <button className=\"dontAddDemotButton\" onClick={() => {props.openRegisterModal()}}>CLOSE</button>\r\n    </Modal>\r\n    )\r\n}\r\n\r\nexport default RegisterModal\r\n"]},"metadata":{},"sourceType":"module"}